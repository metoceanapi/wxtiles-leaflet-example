(()=>{var Y=Object.create,M=Object.defineProperty;var ee=Object.getOwnPropertyDescriptor;var te=Object.getOwnPropertyNames;var ae=Object.getPrototypeOf,re=Object.prototype.hasOwnProperty;var ie=e=>M(e,"__esModule",{value:!0});var L=e=>{if(typeof require!="undefined")return require(e);throw new Error('Dynamic require of "'+e+'" is not supported')};var oe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var se=(e,t,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of te(t))!re.call(e,r)&&r!=="default"&&M(e,r,{get:()=>t[r],enumerable:!(a=ee(t,r))||a.enumerable});return e},ne=e=>se(ie(M(e!=null?Y(ae(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Q=oe((ot,H)=>{H.exports=window.L});var le=Object.create,T=Object.defineProperty,fe=Object.getOwnPropertyDescriptor,ce=Object.getOwnPropertyNames,de=Object.getPrototypeOf,he=Object.prototype.hasOwnProperty,me=e=>T(e,"__esModule",{value:!0}),Ye=typeof L!="undefined"?L:e=>{throw new Error('Dynamic require of "'+e+'" is not supported')},ue=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ge=(e,t,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of ce(t))!he.call(e,r)&&r!=="default"&&T(e,r,{get:()=>t[r],enumerable:!(a=fe(t,r))||a.enumerable});return e},Fe=e=>ge(me(T(e!=null?le(de(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),we=ue((e,t)=>{t.exports=window.L}),ye={comment1:["'degC': ['K', 1, 273.15] -> degC = K * 1 + 273.15",0],comment2:["'hPa': ['Pa', 1000]' -> hPa = Pa * 1000 + 0 (0 - could be ommited)",0],K:["K",1],kelvin:["K",1],F:["K",.5555555555,255.372222222],C:["K",1,273.15],degC:["K",1,273.15],"kg/m^2/s":["kg/m^2/s",1],"Kg/m^2/s":["kg/m^2/s",1],"Kg m**-2 s**-1":["kg/m^2/s",1],"Kg m^-2 s^-1":["kg/m^2/s",1],"Kg m^{-2} s^-1":["kg/m^2/s",1],"mm/h":["kg/m^2/s",.00027777777],"mm/hr":["kg/m^2/s",.00027777777],"W/m^2":["W/m^2",1],"W m^-2":["W/m^2",1],"W m^{-2}":["W/m^2",1],"W/m**2":["W/m^2",1],"W m**-2":["W/m^2",1],"m/s":["m/s",1],"m s**-1":["m/s",1],"m s^-1":["m/s",1],"m.s^{-1}":["m/s",1],knot:["m/s",.514444],knots:["m/s",.514444],"km/h":["m/s",.27777777777],"km h^-1":["m/s",.27777777777],"km h**-1":["m/s",.27777777777],s:["s",1],sec:["s",1],h:["s",3600],min:["s",60],m:["m",1],cm:["m",.01],inch:["m",.0254],Pa:["Pa",1],hPa:["Pa",100],degree:["degree",1],radian:["degree",57.3],"mg/m^3":["mg/m^3",1],"mg m^-3":["mg/m^3",1],"mg.m^-3":["mg/m^3",1],"%":["%",1],"(0 - 1)":["%",100]},pe={none:["#00000000","#00000000"],rainbow:["#ff0000ff","#ffff00ff","#00ff00ff","#00ffffff","#0000ffff","#ff00ffff"],rainbowzerro:["#ff000000","#ff0000ff","#ffff00ff","#00ff00ff","#00ffffff","#0000ffff","#ff00ffff"],rainbow2:["#ff0000ff","#ffff00ff","#00ff00ff","#00ffffff","#0000ffff","#ff00ffff","#ff0000ff"],bluebird:["#0000ffff","#ff00ffff","#00ffffff","#9000ffff","#9090ffff"],bluebirdzerro:["#0000ff00","#0000ffff","#ff00ffff","#00ffffff","#9000ffff","#9090ffff"],bw:["#000000ff","#ffffffff"],wb:["#ffffffff","#000000ff"],redish:["#ff00ffff","#ff0000ff","#ffff00ff"],greenish:["#ffff00ff","#00ff00ff","#00ffffff"],blueish:["#ff00ffff","#0000ffff","#00ffffff"],hspastel:["#AC6EA4FF","#8E92BDFF","#ACD4DEFF","#E9DC8EFF","#E7A97DFF","#E59074FF","#BE7E68FF","#A88F86FF"]},P={base:{parent:void 0,name:"base",fill:"gradient",isolineColor:"inverted",isolineText:!0,vectorType:"arrows",vectorColor:"inverted",streamLineColor:"#777",streamLineSpeedFactor:1,streamLineStatic:!1,showBelowMin:!0,showAboveMax:!0,colorScheme:"rainbow",colors:void 0,colorMap:void 0,levels:void 0,blurRadius:0,addDegrees:0,units:"",extraUnits:void 0},custom:{parent:void 0,name:"custom",fill:"gradient",isolineColor:"inverted",isolineText:!0,vectorType:"arrows",vectorColor:"inverted",streamLineColor:"#777",streamLineSpeedFactor:1,streamLineStatic:!1,showBelowMin:!0,showAboveMax:!0,colorScheme:"rainbow",colors:void 0,colorMap:void 0,levels:void 0,blurRadius:0,addDegrees:0,units:"",extraUnits:void 0}},k,B,z;function U({colorStyles:e={},units:t={},colorSchemes:a={}}={}){window.wxlogging&&console.log("WxTile lib setup: start"),k=Object.assign({},ye,t),B=Object.assign({},a,pe),z=Se(e),window.wxlogging&&console.log("WxTile lib setup: styles unrolled"),document.fonts.load("32px barbs"),document.fonts.load("32px arrows"),window.wxlogging&&console.log("WxTile lib setup is done"+JSON.stringify({colorStyles:e,units:t,colorSchemes:a}))}function ve(){return z}function xe(){return B}function _(e,t,a){let r=a?Object.assign({},k,a):k;if(!r||!e||!t||e===t||!r[e]||!r[t]||r[e][0]!==r[t][0]){window.wxlogging&&console.log(e===t?"Trivial converter:":"Inconvertible units. Default converter is used:",e," -> ",t);let o=l=>l;return o.trivial=!0,o}window.wxlogging&&console.log("Converter: From:",e," To:",t);let i=r[e][1]/r[t][1],s=(r[e][2]||0)/r[t][1]-(r[t][2]||0)/r[t][1];return s?o=>i*o+s:o=>i*o}function Se(e){let t=Object.assign({},P);for(let i in e){let s=e[i];if(Array.isArray(s))for(let o=0;o<s.length;++o)t[i+"["+o+"]"]=Object.assign({},s[o]);else t[i]=Object.assign({},s)}let a=(i,s)=>{if(s==="base")return P.base;let o=i[s];(!o.parent||!(o.parent in i))&&(o.parent="base");let l=a(i,o.parent);return Object.assign(o,Object.assign({},l,o,{parent:"base"}))},r={};for(let i in t)r[i]=a(t,i);return r}function be(e){let t=new Map;return a=>{let r=t.get(a);return r===void 0&&(r=e(a),t.set(a,r)),r}}async function Ce(e,t){let a=new Image;a.crossOrigin="anonymous";let r=()=>{a.src=""};return t.addEventListener("abort",r),a.src=e,await a.decode(),t.removeEventListener("abort",r),a}async function De(e,t){let a=s=>{let o=s.height*s.width,l=new Uint16Array(s.data.buffer),c=new Uint16Array(o);for(let g=0;g<o;g++)c[g]=l[g*2];let m=new Uint8Array(s.data.buffer);for(let g=0;g<8;++g)m[g]=m[g*4+2];let f=new DataView(s.data.buffer),d=f.getFloat32(0,!0),h=f.getFloat32(4,!0),n=(h-d)/65535,u=Ee(c);return{raw:c,dmin:d,dmax:h,dmul:n,integral:u,radius:0}},r=Object.assign(document.createElement("canvas"),{width:258,height:258,imageSmoothingEnabled:!1}).getContext("2d");if(!r)return Promise.reject();let i=await Ce(e,t);return r.drawImage(i,0,0),a(r.getImageData(0,0,258,258))}function Ae(){let e=new AbortController,t=be(a=>De(a,e.signal));return t.abort=()=>e.abort(),t}function Ee(e){let t=new Uint32Array(258*258),a=new Uint32Array(258*258);t[0]=e[0],a[0]=e[0]===0?0:1;for(let r=1;r<258;++r)t[r]=e[r]+t[r-1],t[258*r]=e[258*r]+t[258*r-258],a[r]=(e[r]===0?0:1)+a[r-1],a[258*r]=(e[258*r]===0?0:1)+a[258*r-258];for(let r=1,i=259;r<258;++r,++i)for(let s=1;s<258;++s,++i)t[i]=e[i]+t[i-258]+t[i-1]-t[i-258-1],a[i]=(e[i]===0?0:1)+a[i-258]+a[i-1]-a[i-258-1];return{integral:t,integralNZ:a}}function Me(e,t){if(t<0||t===e.radius)return e;e.radius=t;let a=258,{integral:r,integralNZ:i}=e.integral;for(let s=1;s<a;s++)for(let o=1;o<a;o++){if(!e.raw[a*s+o])continue;let l=Math.min(t,o-1,a-1-o),c=Math.min(t,s-1,a-1-s),m=a*(s-c-1)+o,f=a*(s+c)+o,d=i[m-l-1],h=i[m+l],n=i[f-l-1],u=i[f+l],g=d+u-h-n,p=r[m-l-1],F=r[m+l],y=r[f-l-1],w=r[f+l],v=p+w-F-y;e.raw[s*a+o]=v/g}return e}function S(e){let t=e>>0&255,a=e>>8&255,r=e>>16&255,i=t.toString(16),s=a.toString(16),o=r.toString(16);return i=i.length===2?i:"0"+i,s=s.length===2?s:"0"+s,o=o.length===2?o:"0"+o,"#"+i+s+o}function x(e){if(e[0]==="#"){if(e.length===4)return+("0xff"+e[3]+e[3]+e[2]+e[2]+e[1]+e[1]);if(e.length===7)return+("0xff"+e[5]+e[6]+e[3]+e[4]+e[1]+e[2]);if(e.length===9)return+("0x"+e[7]+e[8]+e[5]+e[6]+e[3]+e[4]+e[1]+e[2])}return window.wxlogging&&console.log("wrong color format",e),0}async function D(e){return(await fetch(e)).json()}function A(e,t="",a){var r;let i=document.createElement(e);return i.className=t,a&&((r=a.appendChild)==null||r.call(a,i)),i}function j(e,t,a){let r=e>>0&255,i=e>>8&255,s=e>>16&255,o=e>>>24,l=t>>0&255,c=t>>8&255,m=t>>16&255,f=t>>>24,d=r+a*(l-r),h=i+a*(c-i),n=s+a*(m-s),u=o+a*(f-o);return d|h<<8|n<<16|u<<24}function Le(e,t,a){let r=[];for(let i=0;i<a;++i)r.push(i*(t-e)/(a-1)+e);return r}function Te(e,t,a){return e>a?a:e<t?t:e}var ke=class{constructor(e,t,[a,r],i){let s=r-a;this.levelIndex=new Uint32Array(65536),this.colorsI=new Uint32Array(65536);let o=[];this.DataToStyle=_(t,e.units,e.extraUnits),this.DataToStyle.trivial&&(e.units=t),i&&(this.DataToKnots=_(t,"knot"));let l=_(e.units,t,e.extraUnits),c=n=>~~(65535*Te((l(n)-a)/(r-a),0,1));if(Array.isArray(e.colorMap)){e.colorMap.sort((n,u)=>n[0]<u[0]?-1:n[0]>u[0]?1:0);for(let[n]of e.colorMap)o.push(c(n))}else{if(e.levels||(e.levels=Le(this.DataToStyle(a),this.DataToStyle(r),10)),e.levels.sort((n,u)=>n<u?-1:n>u?1:0),!e.colors){let n=xe();e.colorScheme&&e.colorScheme in n?e.colors=n[e.colorScheme]:e.colors=n.wb}for(let n of e.levels)o.push(c(n))}let m=65536,f=K(m,e);this.ticks=f.ticks;let d=f.ticks[0].data,h=f.ticks[f.ticks.length-1].data-d;for(let n=0;n<65536;++n){let u=s*n/65535+a,g=this.DataToStyle(u),p=Math.round((m-1)*(g-d)/h);p<=0?this.colorsI[n]=e.showBelowMin?f.colors[0]:0:p>=m?this.colorsI[n]=e.showAboveMax?f.colors[m-1]:0:this.colorsI[n]=f.colors[p]}this.colorsI[0]=0;for(let n=0;n<o[0];++n)this.levelIndex[n]=0;for(let n=0;n<o.length-1;n++)for(let u=o[n];u<o[n+1]+1;++u)this.levelIndex[u]=n;for(let n=o[o.length-1];n<65536;++n)this.levelIndex[n]=o.length-1}};function O(e){var t;if(e!==0&&-.1<e&&e<.1)return e.toExponential(2);let a=e.toString();return((t=a.split(".")[1])==null?void 0:t.length)>2?e.toFixed(2):a}function K(e,t){let a={size:e,showBelowMin:t.showBelowMin,showAboveMax:t.showAboveMax,units:t.units,colors:new Uint32Array(e),ticks:[]},{colorMap:r,levels:i,colors:s}=t,o=t.fill!=="solid";if(r){let h=r[0][0],n=r[r.length-1][0]-h;for(let[u,g]of r){let p=~~((u-h)/n*(e-1)),F={data:u,dataString:O(u),color:g,pos:p};a.ticks.push(F)}for(let u=0;u<r.length-1;u++){let g=a.ticks[u].pos,p=a.ticks[u+1].pos,F=x(r[u][1]),y=o?x(r[u+1][1]):0;for(let w=g;w<p;++w)a.colors[w]=o?j(F,y,(w-g)/(p-g)):F}return a.colors[e-1]=x(r[r.length-1][1]),a}if(!s||!i)return a;let l=0,c=0,m=-1;for(let h=0;h<e;++h){let n=h*(s.length-1)/e;m!==~~n&&(m=~~n,l=x(s[m]),c=s.length>m+1?x(s[m+1]):l),a.colors[h]=o?j(l,c,n-m):l}a.colors[e-1]=x(s[s.length-1]);let f=i[0],d=(e-1)/(i[i.length-1]-f);for(let h of i){let n=~~((h-f)*d),u={data:h,dataString:O(h),color:S(a.colors[n]),pos:n};a.ticks.push(u)}return a}var R=256,_e=2*Math.PI*6378137/R,E=2*Math.PI*6378137/2;function Re(e,t){let a=e/E*180,r=t/E*180;return r=180/Math.PI*(2*Math.atan(Math.exp(r*Math.PI/180))-Math.PI/2),[r,a]}function We(e,t,a){let r=Ie(a),i=e*r-E,s=t*r-E;return[i,s]}function Ie(e){return _e/Math.pow(2,e)}function N(e,t,a){let[r,i]=Re(...We(e,t,a));return[i,-r]}function Pe(e,t){return[e*R,t*R]}function Be(e,t){if(!t)return e;let a=.9999999/Math.pow(2,t.z),r=t.x*256*a,i=t.y*256*a,s={raw:new Uint16Array(258*258),dmin:e.dmin,dmax:e.dmax,dmul:e.dmul},{raw:o}=s;for(let l=-1,c=0;l<=256;l++){let m=i+l*a,f=Math.floor(m),d=m-f;for(let h=-1;h<=256;h++,c++){let n=r+h*a,u=Math.floor(n),g=n-u,p=u+1+(f+1)*258,F=e.raw[p],y=e.raw[p+1],w=e.raw[p+258],v=e.raw[p+258+1];switch((F?1:0)|(y?2:0)|(w?4:0)|(v?8:0)){case 0:o[c]=0;continue;case 1:o[c]=F;continue;case 2:o[c]=y;continue;case 3:w=F,v=y;break;case 4:o[c]=w;continue;case 5:y=F,v=w;break;case 6:v=y+w>>1,F=v;break;case 7:v=y+w>>1;break;case 8:o[c]=v;continue;case 9:y=F+v>>1,w=y;break;case 10:F=y,w=v;break;case 11:w=F+v>>1;break;case 12:F=w,y=v;break;case 13:y=F+v>>1;break;case 14:F=y+w>>1;break}F=e.dmin+e.dmul*F,y=e.dmin+e.dmul*y,w=e.dmin+e.dmul*w,v=e.dmin+e.dmul*v;let C=W(F,y,g),b=W(w,v,g);o[c]=(W(C,b,d)-e.dmin)/e.dmul,o[c]===0&&(o[c]=1)}}return s}function W(e,t,a){let r=((t-e)%360+540)%360-180;return(e+r*a+360)%360}function ze(e,t){if(!t)return e;let a=.9999999/Math.pow(2,t.z),r=t.x*256*a,i=t.y*256*a,s={raw:new Uint16Array(258*258),dmin:e.dmin,dmax:e.dmax,dmul:e.dmul},{raw:o}=s;for(let l=-1,c=0;l<=256;l++){let m=i+l*a,f=Math.floor(m),d=m-f;for(let h=-1;h<=256;h++,c++){let n=r+h*a,u=Math.floor(n),g=n-u,p=u+1+(f+1)*258,F=e.raw[p],y=e.raw[p+1],w=e.raw[p+258],v=e.raw[p+258+1];switch((F?1:0)|(y?2:0)|(w?4:0)|(v?8:0)){case 7:o[c]=g+d<1?g*(y-F)+d*(w-F)+F:0;continue;case 14:o[c]=g+d<1?0:g*(v-w)+d*(v-y)+y+w-v;continue;case 11:o[c]=d<g?(1-g)*(F-y)+d*(v-y)+y:0;continue;case 13:o[c]=d<g?0:(1-g)*(w-v)+d*(w-F)+F+v-w;continue;case 15:o[c]=g+d<1?g*(y-F)+d*(w-F)+F:g*(v-w)+d*(v-y)+y+w-v;continue;default:o[c]=0}}}return s}function Ue(e){let[t,a]=Pe(e.x,e.y),[r,i]=N(t,a,e.z),[s,o]=N(t+256,a+256,e.z);return{west:r,north:i,east:s,south:o}}function je({layer:e,coords:t,done:a}){let r=A("div","leaflet-tile s-tile");return e.dataSource?(r.wxtile=new Oe({layer:e,coords:t,tileEl:r}),r.wxtile._load().then(i=>{i.draw(),a()})):setTimeout(a),r}var Oe=class{constructor({layer:e,coords:t,tileEl:a}){this.data=[],this.sLines=[],this.imData=null,this.coords=t,this.layer=e,this.canvasFill=A("canvas","s-tile canvas-fill",a),this.canvasSlines=A("canvas","s-tile canvas-slines",a),this.canvasVector=this.canvasFill,this.canvasFill.width=this.canvasFill.height=this.canvasSlines.width=this.canvasSlines.height=256;function r(i){let s=i.getContext("2d");if(!s)throw"error";return s}this.canvasFillCtx=r(this.canvasFill),this.canvasSlinesCtx=r(this.canvasSlines),this.canvasVectorCtx=this.canvasFillCtx}draw(){if(!this.data.length){this.canvasFillCtx.clearRect(0,0,256,256),this.canvasSlinesCtx.clearRect(0,0,256,256);return}this._drawFillAndIsolines(),this._drawVector(),this._drawDegree(),this._drawStaticSlines()}clearSLinesCanvas(){this.canvasSlinesCtx.clearRect(0,0,256,256)}drawSLines(e){if(this.sLines.length===0)return;let t=this.canvasSlinesCtx;if(t.clearRect(0,0,256,256),this.layer.style.streamLineColor==="none"){this.sLines=[];return}let a=this.layer.style.streamLineColor.substr(0,7);e=e>>7;for(let r=0;r<this.sLines.length;++r){let i=this.sLines[r],s=i.length-1,o=(e+(1+i[0].x)*(1+i[0].y))%30;for(let l=0;l<s;++l){let c=i[l],m=i[l+1],f=1-(o-l)/s;(f<0||f>1)&&(f=0);let d=(~~(f*255)).toString(16);t.strokeStyle=a+(d.length<2?"0"+d:d);let h=1+~~((1.2-f)*5);t.lineWidth=h,t.beginPath(),t.moveTo(c.x,c.y),t.lineTo(m.x,m.y),t.stroke()}}}getData({x:e,y:t}){if(!this.data.length)return;let a=this.data[0].raw[(t+1)*258+(e+1)];return{raw:a,data:this.data[0].dmin+this.data[0].dmul*a}}async _load(){let{coords:e,layer:t}=this,{boundaries:a}=t.dataSource.meta;if(a==null?void 0:a.boundaries180){let m=Ue(e),f=d=>!(m.west>d.east||d.west>m.east||m.south>d.north||d.south>m.north);if(!a.boundaries180.some(f))return this.data=[],this.imData=null,this}let{upCoords:r,subCoords:i}=this._splitCoords(e),s=this._coordsToURLs(r),o=[];try{o=await Promise.all(s.map(t.loadData))}catch(m){return this.data=[],this.imData=null,this}let l=t.dataSource.units==="degree"?Be:ze,c=m=>l(Me(m,this.layer.style.blurRadius),i);return this.data=o.map(c),this.imData=this.canvasFillCtx.createImageData(256,256),this.layer.vector&&(this._vectorPrepare(),this._createSLines()),this}_splitCoords(e){let t=e.z-this.layer.dataSource.meta.maxZoom;if(t<=0)return{upCoords:e};let a={x:e.x>>>t,y:e.y>>>t,z:this.layer.dataSource.meta.maxZoom},r={x:e.x&(1<<t)-1,y:e.y&(1<<t)-1,z:t};return{upCoords:a,subCoords:r}}_coordsToURLs(e){let t=this.layer.dataSource.baseURL.replace("{z}",String(e.z)).replace("{x}",String(e.x)).replace("{y}",String(e.y));return this.layer.dataSource.variables.map(a=>t.replace("{var}",a))}_vectorPrepare(){if(this.data.length!==2)throw"this.data !== 2";this.data.unshift({raw:new Uint16Array(258*258),dmin:0,dmax:0,dmul:0});let[e,t,a]=this.data;e.dmax=1.42*Math.max(-t.dmin,t.dmax,-a.dmin,a.dmax),e.dmul=(e.dmax-e.dmin)/65535;for(let r=0;r<258*258;++r){if(!t.raw[r]||!a.raw[r]){e.raw[r]=0;continue}let i=t.dmin+t.dmul*t.raw[r],s=a.dmin+a.dmul*a.raw[r];e.raw[r]=Math.sqrt(s*s+i*i)/e.dmul}}_drawFillAndIsolines(){let{imData:e}=this;if(!e)throw"_drawFillAndIsolines: !imData";let{canvasFillCtx:t}=this;t.clearRect(0,0,256,256);let a=new Uint32Array(e.data.buffer),{raw:r}=this.data[0],{clut:i,style:s}=this.layer,{levelIndex:o,colorsI:l}=i;if(s.fill!=="none"){let m=l;for(let f=0,d=0,h=259;f<256;++f,h+=2)for(let n=0;n<256;++n,++d,++h)a[d]=m[r[h]]}else a.fill(0);let c=[];if(s.isolineColor!=="none"){let m=s.isolineColor[0]==="#"?x(s.isolineColor):0;for(let f=0,d=0;f<256;f+=1)for(let h=0;h<256;h+=1){let n=(f+1)*258+(h+1),u=r[n],g=r[n+1],p=r[n+258];if(!u||!g||!p)continue;let F=o[u],y=o[g],w=o[p];if(F!==y||F!==w){let v=Math.max(F,y,w),C=Math.max(u,g,p),b=f*256+h;switch(s.isolineColor){case"inverted":a[b]=~l[C]|4278190080;break;case"fill":a[b]=l[C]|4278190080;break;default:a[b]=m;break}s.isolineText&&!(++d%255)&&h>20&&h<235&&f>20&&f<235&&c.push({x:h,y:f,d:u,dr:g,db:p,mli:v})}}}if(t.putImageData(e,0,0),!c.length){t.font="1.1em Sans-serif",t.lineWidth=2,t.strokeStyle="white",t.fillStyle="black",t.textAlign="center",t.textBaseline="middle";for(let{x:m,y:f,d,dr:h,db:n,mli:u}of c){let g=this.layer.clut.ticks[u].dataString,p=Math.atan2(d-h,n-d);t.save(),t.translate(m,f),t.rotate(p<-1.57||p>1.57?p+3.14:p),t.strokeText(g,0,0),t.fillText(g,0,0),t.restore()}}}_drawStaticSlines(){if(!this.sLines.length||!this.layer.style.streamLineStatic)return;let{canvasSlinesCtx:e}=this;if(e.clearRect(0,0,256,256),this.layer.style.streamLineColor==="none"){this.sLines=[];return}e.lineWidth=2,e.strokeStyle=this.layer.style.streamLineColor,e.beginPath();for(let t=this.sLines.length;t--;){let a=this.sLines[t];for(let r=0;r<a.length-1;++r){let i=a[r],s=a[r+1];e.moveTo(i.x,i.y),e.lineTo(s.x,s.y)}}e.stroke()}_drawVector(){if(!this.layer.vector||!this.layer.clut.DataToKnots||!this.layer.style.vectorColor||this.layer.style.vectorColor==="none"||!this.layer.style.vectorType||this.layer.style.vectorType==="none")return;if(this.data.length!==3)throw"this.data.length !== 3";let[e,t,a]=this.data,{canvasVectorCtx:r}=this;switch(this.layer.style.vectorType){case"barbs":r.font="40px barbs";break;case"arrows":r.font="50px arrows";break;default:r.font=this.layer.style.vectorType}r.textAlign="center",r.textBaseline="middle";let i=this.layer.style.addDegrees?.017453292519943*this.layer.style.addDegrees:0,s=32;for(let o=s/2;o<256;o+=s)for(let l=s/2;l<256;l+=s){let c=l+1+(o+1)*258;if(!e.raw[c])continue;let m=Math.atan2(t.dmin+t.raw[c]*t.dmul,a.dmin+a.raw[c]*a.dmul),f=e.dmin+e.raw[c]*e.dmul,d=this.layer.dataSource.variables[0].includes("current")?5:.2,h=Math.min(this.layer.clut.DataToKnots(f)*d,25)+65,n=String.fromCharCode(h);switch(this.layer.style.vectorColor){case"inverted":r.fillStyle=S(~this.layer.clut.colorsI[e.raw[c]]);break;case"fill":r.fillStyle=S(this.layer.clut.colorsI[e.raw[c]]);break;default:r.fillStyle=this.layer.style.vectorColor;break}r.save(),r.translate(l,o),r.rotate(m+i),r.fillText(n,0,0),r.restore()}}_drawDegree(){if(this.layer.dataSource.units!=="degree")return;let{canvasVectorCtx:e}=this,t=this.layer.style.addDegrees?.017453292519943*this.layer.style.addDegrees:0;e.font="50px arrows",e.textAlign="start",e.textBaseline="alphabetic";let a=this.data[0],r="L",i=32;for(let s=i/2;s<256;s+=i)for(let o=i/2;o<256;o+=i){let l=o+1+(s+1)*258;if(!a.raw[l])continue;let c=(a.dmin+a.raw[l]*a.dmul+180)*.01745329251;switch(this.layer.style.vectorColor){case"inverted":e.fillStyle=S(~this.layer.clut.colorsI[a.raw[l]]);break;case"fill":e.fillStyle=S(this.layer.clut.colorsI[a.raw[l]]);break;default:e.fillStyle=this.layer.style.vectorColor;break}e.save(),e.translate(o,s),e.rotate(c+t),e.fillText(r,0,0),e.restore()}}_createSLines(){if(this.data.length!==3)throw"this.data.length !== 3";if(!this.layer.style.streamLineColor||this.layer.style.streamLineColor==="none")return;let e=this.layer.style.streamLineSpeedFactor||1;this.sLines=[];let[t,a,r]=this.data,i=Math.max(this.coords.z-this.layer.dataSource.meta.maxZoom,0),s=Math.min(2**(i+5),128),o=~~(120+i*60);for(let l=0;l<=256;l+=s)for(let c=0;c<=256;c+=s){if(!t.raw[c+l*258])continue;let m=[],f=c,d=l;for(let h=0;h<=o&&f>=0&&f<=256&&d>=0&&d<=256;h++){!(h%(o/6))&&m.push({x:~~f,y:~~d});let n=~~f+1+(~~d+1)*258;if(!t.raw[n])break;f+=e*(a.dmin+a.raw[n]*a.dmul)/t.dmax,d-=e*(r.dmin+r.raw[n]*r.dmul)/t.dmax}f=c,d=l;for(let h=1;h<=o&&f>=0&&f<=256&&d>=0&&d<=256;h++){!(h%(o/6))&&m.unshift({x:~~f,y:~~d});let n=~~f+1+(~~d+1)*258;if(!t.raw[n])break;f-=e*(a.dmin+a.raw[n]*a.dmul)/t.dmax,d+=e*(r.dmin+r.raw[n]*r.dmul)/t.dmax}m.length>2&&this.sLines.push(m)}}},Ke={initializeLayer({dataSource:e,options:t={},lazy:a=!0}){if(window.wxlogging&&console.log("Creating a WxTile layer:"+JSON.stringify({dataSource:e,options:t})),!e){window.wxlogging&&console.log("dataSource is empty!");return}Object.assign(this.options,t),this.styles=ve(),e.ext||(e.ext="webp"),this.wxtiles=new Map;let r=()=>{window.wxlogging&&console.log("Setup:",e.name),this.setupCompletePromise=this._setUpDataSet(e),this.setupCompletePromise.then(()=>{window.wxlogging&&console.log("Setup complete:",this.dataSource.name,this.error&&". error:"+this.error||""),this._initializeEvents(),this._map&&this._onAddL(),this.fire("setupcomplete",{layer:this})})};a?this.once("add",r):r(),this.on("remove",this._onRemoveL,this)},createTile(e,t){return this.error?(setTimeout(t),Object.assign(A("div","error-tile"),{innerHTML:this.error})):je({layer:this,coords:e,done:t})},getSetupCompletePromise(){return this.setupCompletePromise},getTile(e){if(!this._map||this.error)return;let t=this._map.getZoom(),{x:a,y:r}=this._map.project(e,t),i={x:~~(a/256),y:~~(r/256)},s=this.wxtiles.get(`${i.x}:${i.y}:${t}`);if(!s||!s.data)return;let o={x:~~(a-i.x*256),y:~~(r-i.y*256)},l=s.getData(o);if(!l)return;let{raw:c,data:m}=l,f=this.clut.colorsI[c],d=S(f),h=this.clut.DataToStyle(m);return{tile:s,data:m,raw:c,rgba:f,hexColor:d,inStyleUnits:h,tilePoint:o,units:this.style.units}},setStyle(e){if(!this.dataSource){window.wxlogging&&console.log("setStyle: failed. Lazy setup not finished yet.");return}if(!(this.dataSource.styleName===e&&e!=="custom")){if(e&&(this.dataSource.styleName=e),e==="custom"&&this.styles.custom){(!this.styles.custom.parent||!(this.styles.custom.parent in this.styles))&&(this.styles.custom.parent="base");let t=this.styles[this.styles.custom.parent];this.styles.custom=Object.assign(Object.assign({},t),this.styles.custom)}this.dataSource.styleName in this.styles?Array.isArray(this.styles[this.dataSource.styleName])&&(this.dataSource.styleName+="[0]"):(this.dataSource.styleName=this.dataSource.name+"[0]",this.dataSource.styleName in this.styles||(this.dataSource.styleName="base",window.wxlogging&&console.log(`cant find the style (${e}), default is used`)));try{let t=this.styles[this.dataSource.styleName];this.style=Object.assign({},t);let a=this.style.streamLineColor;a!=="none"&&a.length<7&&(this.style.streamLineColor="#"+a[1]+a[1]+a[2]+a[2]+a[3]+a[3]);let r=this.dataSource.minmax[0];this.clut=new ke(this.style,this.dataSource.units,r,this.vector)}catch(t){this.error="setStyle: impossible error in RawCLUT",window.wxlogging&&console.log(this.error,t);return}e&&(this._checkAndStartSlinesAnimation(),this._reloadTiles()),window.wxlogging&&console.log('setStyle: "'+this.dataSource.styleName+'" for '+this.dataSource.name+" complete."),this.fire("setstyle",{layer:this})}},getStyle(){if(!this.dataSource){window.wxlogging&&console.log("getStyle: failed. Lazy setup not finished yet.");return}return this.dataSource&&this.dataSource.styleName||""},getStyleName(){if(!this.dataSource){window.wxlogging&&console.log("getStyleName: failed. Lazy setup not finished yet.");return}return this.dataSource&&this.style&&this.style.name||"no style"},setTime(e){if(!this.dataSource){window.wxlogging&&console.log("setTime: failed. Lazy setup not finished yet.");return}let t=this._getClosestTimeString(e);if(this.dataSource.time!==t){this.dataSource.time=t,this.dataSource.baseURL=this.dataSource.originURI+this.dataSource.instance+`{var}/${this.dataSource.time}/{z}/{x}/{y}.${this.dataSource.ext}`,this.fire("settime",{layer:this,layerTime:t}),window.wxlogging&&console.log("setTime: "+t+" for "+this.dataSource.name+" complete.");let a=this._reloadTiles();return a.then(()=>{let r=this.wxtiles.values().next().value;if(!(r==null?void 0:r.data.length))return;let[i,s]=this.dataSource.minmax[0],{dmin:o,dmax:l}=r.data[0];(Math.abs(o-i)>.01||Math.abs(l-s)>.01)&&(this.dataSource.minmax=r.data.map(c=>[c.dmin,c.dmax]),this._updateMinMax(),this.setStyle())}),a}return Promise.resolve()},getTime(){if(!this.dataSource){window.wxlogging&&console.log("getTime: failed. Lazy setup not finished yet.");return}return this.dataSource.time},getTimes(){if(!this.dataSource){window.wxlogging&&console.log("getTimes: failed. Lazy setup not finished yet.");return}return this.dataSource.meta.times},async checkDataChanged(){if(!this.dataSource)return window.wxlogging&&console.log("getTimes: failed. Lazy setup not finished yet."),Promise.resolve(!1);let e=await D(this.dataSource.originURI+"instances.json"),t=e[e.length-1]+"/";if(this.dataSource.instance!==t)return!0;let a=await D(this.dataSource.originURI+t+"meta.json");return this.dataSource.meta.times.toString()!==a.times.toString()},reloadData(){return this._setUpDataSet()},getLegendData(e){if(!this.error){if(!this.clut){window.wxlogging&&console.log("getLegendData: failed. Lazy setup not finished yet:"+this.dataSource.name);return}return K(e,this.style)}},setTimeAnimationMode(e=2){this.oldMaxZoom=this.dataSource.meta.maxZoom;let t=this._map.getZoom(),a=(t<this.oldMaxZoom?t:this.oldMaxZoom)-e;this.dataSource.meta.maxZoom=a<0?0:a},unsetTimeAnimationMode(){var e,t;!this.oldMaxZoom||!((t=(e=this.dataSource)==null?void 0:e.meta)==null?void 0:t.maxZoom)||(this.dataSource.meta.maxZoom=this.oldMaxZoom,this._reloadTiles())},getMinMax(){let[e,t]=this.dataSource.minmax[0];return{min:e,max:t}},async _setUpDataSet(e){if(e&&!(e.dataset&&e.variables&&Array.isArray(e.variables)&&e.variables.length>0&&e.variables.length<3)){this.error=e.name+": dataSource error",window.wxlogging&&console.log(this.error);return}e&&(this.dataSource=e),this._stopLoadingResetLoadDataFunc(),this.dataSource.originURI=this.dataSource.serverURI+"/"+this.dataSource.dataset+"/";try{let t=await D(this.dataSource.originURI+"instances.json");this.dataSource.instance=t[t.length-1]+"/"}catch{this.error=this.dataSource.name+": load instances.json error",window.wxlogging&&console.log(this.error);return}try{let t=this.dataSource.originURI+this.dataSource.instance+"meta.json";this.dataSource.meta=await D(t)}catch{this.error=this.dataSource.name+": load meta.json error",window.wxlogging&&console.log(this.error);return}this.vector=this.dataSource.variables.length===2,this.animation=this.vector,this.dataSource.units=this.dataSource.meta.variablesMeta[this.dataSource.variables[0]].units,this.dataSource.minmax=this.dataSource.variables.map(t=>[this.dataSource.meta.variablesMeta[t].min,this.dataSource.meta.variablesMeta[t].max]),this._updateMinMax(),e&&(this.setTime(Date.now()),this.setStyle())},_updateMinMax(){if(!this.vector)return;let[[e,t],[a,r]]=this.dataSource.minmax;this.dataSource.minmax.unshift([0,1.42*Math.max(-e,t,-a,r)])},_initializeEvents(){this.error||(this.on("tileload",e=>{this.wxtiles.set(`${e.coords.x}:${e.coords.y}:${e.coords.z}`,e.tile.wxtile)}),this.on("tileunload",e=>{this.wxtiles.delete(`${e.coords.x}:${e.coords.y}:${e.coords.z}`)}),this.on("add",this._onAddL,this))},_checkZoom(){(!this._map||this._map.getZoom()<this.dataSource.meta.maxZoom)&&this._stopLoadingResetLoadDataFunc()},_onAddL(){window.wxlogging&&console.log("onadd:",this.dataSource.name),this.error||this._map.on("zoomstart",this._checkZoom,this),this.setupCompletePromise.then(()=>{this.redraw(),this._checkAndStartSlinesAnimation()})},_onRemoveL(){window.wxlogging&&console.log("onremove:",this.dataSource.name),this._map.off("zoomstart",this._checkZoom,this),this.setupCompletePromise.then(()=>{this._stopLoadingResetLoadDataFunc(),this._stopSlinesAnimation()})},_stopLoadingResetLoadDataFunc(){var e;(e=this.loadData)==null||e.abort(),this.loadData=Ae()},_checkAndStartSlinesAnimation(){if(this.animFrame||!this.animation||!this.vector||!this.style.streamLineColor||this.style.streamLineColor==="none")return;let e=t=>{if(!this.animation||this.style.streamLineStatic){this._stopSlinesAnimation();return}this.wxtiles.forEach(a=>a.drawSLines(t)),this.animFrame=requestAnimationFrame(e)};e()},_stopSlinesAnimation(){cancelAnimationFrame(this.animFrame),this.wxtiles.forEach(e=>e.clearSLinesCanvas()),this.animFrame=0},_getClosestTimeString(e){return this.dataSource.meta.times.find(t=>new Date(t).getTime()>=e)||this.dataSource.meta.times[this.dataSource.meta.times.length-1]},_redrawTiles(){!this.wxtiles||this.animationRedrawID||(this.animationRedrawID=requestAnimationFrame(()=>{this.wxtiles.forEach(e=>e.draw()),this.animationRedrawID=null}))},_reloadTiles(){let e=[];this.wxtiles.forEach(a=>e.push(a._load()));let t=Promise.all(e);return t.then(()=>this._redrawTiles()),t}},I=Fe(we()),Ne=I.default.GridLayer.extend(Ke);function Z(e){let t=new Ne;return t.initializeLayer(e),t}var Ze={options:{URI:""},onAdd(){let e=document.createElement("img");return e.src=this.options.URI,e.className="wxtiles-logo",e}},$e=I.default.Control.extend(Ze);function $(e){return window.wxlogging&&console.log("Add watermark:",JSON.stringify(e)),new $e(e)}var et=I.default.GridLayer.extend({createTile(e){let t=document.createElement("div");return t.innerHTML=[e.x,e.y,e.z].join(", "),t.style.outline="1px solid red",t}});function V(e){console.log(e?"Logging on":"Logging off"),window.wxlogging=e}var Ve={Direction:{name:"Direction",fill:"none",colorScheme:"none",vectorColor:"#555",vectorType:"arrows",isolineColor:"none"},CurDirection:{name:"Current direction",fill:"none",colorScheme:"none",vectorColor:"#555",vectorType:"arrows",isolineColor:"none",addDegrees:180},"Significant.wave.height":{name:"Significant wave height",fill:"gradient",isolineColor:"inverted",vectorColor:"none",vectorType:"none",showBelowMin:!0,showAboveMax:!0,colorScheme:"rainbow",blurRadius:0,addDegrees:0,colors:["#AC6EA4FF","#8E92BDFF","#ACD4DEFF","#E9DC8EFF","#E7A97DFF","#E59074FF","#BE7E68FF","#A88F86FF"],levels:[0,.5,1,2,3,4,6,8,12,16,20]},"Wave.Period":{name:"Wave Period"},"Wind.speed":{name:"Wind speed",fill:"gradient",isolineColor:"inverted",vectorType:"arrows",vectorColor:"inverted",streamLineColor:"#777",streamLineSpeedFactor:1,showBelowMin:!0,showAboveMax:!0,colorScheme:"rainbow",levels:[0,10,20,30,40,50],blurRadius:0,addDegrees:0,units:""},"Current.speed":{name:"Current speed",fill:"gradient",isolineColor:"inverted",showBelowMin:!0,showAboveMax:!0,colors:["#5E6472FF","#AED9E0FF","#B3E6E3FF","#B8F2E6FF","#FAF3DDFF","#FFA69EFF"],levels:[0,.25,.75,1,1.5,2],blurRadius:0,addDegrees:0,vectorColor:"inverted",vectorType:"arrows",streamLineColor:"#888",streamLineSpeedFactor:3},"Sea.surface.temperature":{name:"Sea surface temperature",fill:"gradient",isolineColor:"inverted",vectorColor:"none",vectorType:"none",showBelowMin:!0,showAboveMax:!0,colorScheme:"rainbow",colors:["#00B3FFFF","#1D9ACFFF","#277DA1FF","#577590FF","#4D908EFF","#43AA8BFF","#90BE6DFF","#F9C74FFF","#F9844AFF","#F8961EFF","#F3722CFF","#F94144FF","#FD0C10FF"],levels:[0,4,8,10,12,14,16,18,20,22,24,26,28],blurRadius:0,addDegrees:0},"wind.speed.arrow-fill":{parent:"base-vector",name:"Wind speed color fill"},"wind.speed-arrow":{parent:"wind.speed.arrow-fill",name:"Wind speed arrows",fill:"none",isolineColor:"none",vectorColor:"fill",vectorType:"arrows"},"wind.speed-barb":{parent:"wind.speed-arrow",name:"Wind speed barbs",vectorType:"barbs"},"wave.height":{parent:"base",name:"Significant wave height",fill:"gradient",isolineColor:"inverted",vectorColor:"none",vectorType:"none",showBelowMin:!0,showAboveMax:!0,colorScheme:"rainbow",blurRadius:0,addDegrees:0,colors:["#AC6EA4FF","#8E92BDFF","#ACD4DEFF","#E9DC8EFF","#E7A97DFF","#E59074FF","#BE7E68FF","#A88F86FF"],levels:[0,.5,1,2,3,4,6,8]},"wave.direction-arrow":{parent:"base",name:"Wave direction",fill:"none",colorScheme:"none",vectorColor:"#555",vectorType:"arrows",isolineColor:"none"},"wave.period":{parent:"base",name:"Wave period"},"air.temperature":{parent:"base",name:"Air temperature (uncomlete style!)",units:"degC"},"air.pressure":{parent:"base",name:"Air Pressure",fill:"gradient",isolineColor:"inverted",vectorColor:"none",vectorType:"none",showBelowMin:!0,showAboveMax:!0,blurRadius:0,addDegrees:0,colors:["#1C008EFF","#392490FF","#54478CFF","#2C699AFF","#048BA8FF","#0DB39EFF","#16DB93FF","#83E377FF","#B9E769FF","#EFEA5AFF","#F1C453FF","#F29E4CFF","#FE7E00FF"],levels:[94,95,96,97,98,99,100,101,102,102.5,103,104],units:"hPa"},"air.pressure-isolines":{parent:"air.pressure",name:"Air Pressure isolines",fill:"none",isolineColor:"#aaa"},"sea.temperature":{parent:"base",name:"Sea Surface Temperature",fill:"gradient",isolineColor:"inverted",vectorColor:"none",vectorType:"none",showBelowMin:!0,showAboveMax:!0,colorScheme:"rainbow",colors:["#00B3FFFF","#1D9ACFFF","#277DA1FF","#577590FF","#4D908EFF","#43AA8BFF","#90BE6DFF","#F9C74FFF","#F9844AFF","#F8961EFF","#F3722CFF","#F94144FF","#FD0C10FF"],levels:[0,4,8,10,12,14,16,18,20,22,24,26,28],blurRadius:0,addDegrees:0},"sea.salinity":{parent:"base",name:"Sea salinity"},"current.speed":{parent:"base-vector",name:"Current Speed",fill:"gradient",isolineColor:"inverted",showBelowMin:!0,showAboveMax:!0,colors:["#5E6472FF","#AED9E0FF","#B3E6E3FF","#B8F2E6FF","#FAF3DDFF","#FFA69EFF"],levels:[0,.25,.75,1,1.5,2],blurRadius:0,addDegrees:0,vectorColor:"inverted",vectorType:"arrows",streamLineColor:"#888",streamLineSpeedFactor:3},precipitation:{parent:"base",name:"Air precipitation",fill:"none",isolineColor:"none",colorScheme:"none"},"rain.base":{parent:"base",name:"Rain reflectivity basic style",fill:"gradient",isolineColor:"none",blurRadius:0,showBelowMin:!1,showAboveMax:!0,units:"dBz"},"rain.radar":{parent:"rain.base",name:"Rain Radar reflectivity",colors:["#323200FF","#FFFF00FF","#FFFF00FF","#FF8700FF","#0032A0FF","#0050FFFF","#006496FF","#00FFFFFF","#640000FF","#FF1010FF","#490D7DFF","#9632FFFF","#BEBEBEFF","#FFFFFFFF","#006400FF","#00FF00FF","#640064FF","#FF00FFFF"],levels:[0,16,16,20,20,30,30,40,40,45,45,50,50,55,55,60,60,72]},"rain.EWIS":{parent:"rain.base",name:"Rain Radar reflectivity EWIS",colorMap:[[0,"#323200ff"],[16,"#ffff00ff"],[20,"#ffff00ff"],[20,"#0032a0ff"],[30,"#0050ffff"],[30,"#006496ff"],[40,"#00ffffff"],[40,"#640000ff"],[45,"#ff0000ff"],[45,"#501980ff"],[50,"#9632ffff"],[50,"#bebebeff"],[55,"#ffffffff"],[55,"#006400ff"],[60,"#00ff00ff"],[60,"#640064ff"],[72,"#ff00ffff"]]},"rain.Classic.IRIS":{parent:"rain.base",name:"Rain Radar Classic IRIS",colorMap:[[2,"#003cff"],[7,"#00c7c7"],[12,"#00a8ac"],[18,"#008261"],[21,"#009637"],[23,"#00c027"],[28,"#00e80a"],[34,"#24ff24"],[37,"#ffff1e"],[39,"#ffe600"],[44,"#ffbc00"],[50,"#ff9800"],[53,"#ff5e00"],[55,"#f20f00"],[60,"#bb003a"],[66,"#f0f"],[72,"#f0f"]]},"rain.radar.metocean":{parent:"rain.base",name:"Rain Radar metocean",colorMap:[[10,"#88EDEE"],[15,"#88EDEE"],[15,"#0797CC"],[20,"#0797CC"],[20,"#0877AC"],[26,"#0877AC"],[26,"#075589"],[35,"#075589"],[35,"#FEEF0D"],[40,"#FEEF0D"],[40,"#FEAA04"],[45,"#FEAA04"],[45,"#FD7803"],[50,"#FD7803"],[50,"#FE4102"],[55,"#FE4102"],[55,"#FE2303"],[60,"#FE2303"],[60,"#FD0403"],[65,"#FD0403"],[65,"#FFFFFF"],[85,"#FFFFFF"],[85,"#FF35FE"],[100,"#FF35FE"]]},"rain.radar.metocean.gradient":{parent:"rain.base",name:"Rain Radar metocean gradient",colorMap:[[10,"#88EDEE"],[15,"#0797CC"],[20,"#0877AC"],[26,"#075589"],[35,"#FEEF0D"],[40,"#FEAA04"],[45,"#FD7803"],[50,"#FE4102"],[55,"#FE2303"],[60,"#FD0403"],[65,"#FFFFFF"],[85,"#FF35FE"]]},"rain.radar.metservice":{parent:"rain.base",name:"Rain Radar metservice",colorMap:[[0,"#323200ff"],[16,"#ffff00ff"],[20,"#ffff00ff"],[20,"#0032a0ff"],[30,"#0050ffff"],[30,"#006496ff"],[40,"#00ffffff"],[40,"#640000ff"],[45,"#ff0000ff"],[45,"#501980ff"],[50,"#9632ffff"],[50,"#bebebeff"],[55,"#ffffffff"],[55,"#006400ff"],[60,"#00ff00ff"],[60,"#640064ff"],[72,"#ff00ffff"]]},"rain.radar.metservice.gradient":{parent:"rain.base",name:"Rain Radar metservice gradient",colorMap:[[0,"#323200ff"],[16,"#ffff00ff"],[20,"#0032a0ff"],[30,"#006496ff"],[40,"#640000ff"],[45,"#501980ff"],[50,"#bebebeff"],[55,"#006400ff"],[60,"#640064ff"],[72,"#ff00ffff"]]}},q=Ve;var qe={none:["#00000000","#00000000"],rainbow:["#ff0000ff","#ffff00ff","#00ff00ff","#00ffffff","#0000ffff","#ff00ffff"],rainbowzerro:["#ff000000","#ff0000ff","#ffff00ff","#00ff00ff","#00ffffff","#0000ffff","#ff00ffff"],rainbow2:["#ff0000ff","#ffff00ff","#00ff00ff","#00ffffff","#0000ffff","#ff00ffff","#ff0000ff"],bluebird:["#0000ffff","#ff00ffff","#00ffffff","#9000ffff","#9090ffff"],bluebirdzerro:["#0000ff00","#0000ffff","#ff00ffff","#00ffffff","#9000ffff","#9090ffff"],bw:["#000000ff","#ffffffff"],wb:["#ffffffff","#000000ff"],redish:["#ff00ffff","#ff0000ff","#ffff00ff"],greenish:["#ffff00ff","#00ff00ff","#00ffffff"],blueish:["#ff00ffff","#0000ffff","#00ffffff"],hspastel:["#AC6EA4FF","#8E92BDFF","#ACD4DEFF","#E9DC8EFF","#E7A97DFF","#E59074FF","#BE7E68FF","#A88F86FF"]},G=qe;var Ge={comment1:["'degC': ['K', 1, 273.15] -> degC = K * 1 + 273.15",0],comment2:["'hPa': ['Pa', 1000]' -> hPa = Pa * 1000 + 0 (0 - could be ommited)",0],K:["K",1],kelvin:["K",1],F:["K",.5555555555,255.372222222],C:["K",1,273.15],degC:["K",1,273.15],"kg/m^2/s":["kg/m^2/s",1],"Kg/m^2/s":["kg/m^2/s",1],"Kg m**-2 s**-1":["kg/m^2/s",1],"Kg m^-2 s^-1":["kg/m^2/s",1],"Kg m^{-2} s^-1":["kg/m^2/s",1],"W/m^2":["W/m^2",1],"W m^-2":["W/m^2",1],"W m^{-2}":["W/m^2",1],"W/m**2":["W/m^2",1],"W m**-2":["W/m^2",1],"m/s":["m/s",1],"m s**-1":["m/s",1],"m s^-1":["m/s",1],"m.s^{-1}":["m/s",1],knot:["m/s",.514444],knots:["m/s",.514444],"km/h":["m/s",.27777777777],"km h^-1":["m/s",.27777777777],"km h**-1":["m/s",.27777777777],s:["s",1],sec:["s",1],h:["s",3600],min:["s",60],m:["m",1],cm:["m",.01],inch:["m",.0254],Pa:["Pa",1],hPa:["Pa",1e3],degree:["degree",1],radian:["degree",57.3]},J=Ge;var X=ne(Q());function Je(){let e=X.default.map("map",{center:[-37.803113,174.878166],zoom:5,zoomControl:!1});V(!0),$({URI:"res/wxtiles-logo.png",position:"topleft"}).addTo(e),U({colorStyles:q,units:J,colorSchemes:G}),Z({dataSource:{serverURI:"https://tiles.metoceanapi.com/data",ext:"png",dataset:"ecwmf.global",variables:["wind.speed.eastward.at-10m","wind.speed.northward.at-10m"],name:"wind speed at 10m",styleName:"base"},lazy:!0,options:{opacity:.99}}).addTo(e)}Je();})();
